<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><meta name="og:title" content="ãƒ–ãƒ­ã‚°ã«ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸ - ã½ã‚“ãƒ–ãƒ­ã‚°" data-next-head=""/><meta property="og:type" content="article" data-next-head=""/><title data-next-head="">ãƒ–ãƒ­ã‚°ã«ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸ - ã½ã‚“ãƒ–ãƒ­ã‚°</title><link rel="preload" href="/_next/static/css/28388b2201b96dd5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/28388b2201b96dd5.css" data-n-g=""/><link rel="preload" href="/_next/static/css/e1d67faba6163aa1.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e1d67faba6163aa1.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/_next/static/chunks/webpack-59041051e025bed2.js" defer=""></script><script src="/_next/static/chunks/framework-384d27dd06c6faf3.js" defer=""></script><script src="/_next/static/chunks/main-4550fab03f83accb.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4fa09b1b2f71f6f3.js" defer=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-594c9fb52fd3e062.js" defer=""></script><script src="/_next/static/6lyUpe6-GWfQPga3jDf8b/_buildManifest.js" defer=""></script><script src="/_next/static/6lyUpe6-GWfQPga3jDf8b/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="_app_site__wQ_HZ"><header class="_app_heading__uRQQR"><a class="_app_brand__aiSQf" href="/">ã½ã‚“ãƒ–ãƒ­ã‚°</a></header><div class="_app_content__mHXSR"><div class="_slug__published___nJg1">2021-10-14</div><h1 class="_slug__title__xQmM2">ãƒ–ãƒ­ã‚°ã«ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸ</h1><p class="_slug__tags__ZhcyH"><span class="_slug__tag__hrYB6">TypeScript</span><span class="_slug__tag__hrYB6">Next.js</span><span class="_slug__tag__hrYB6">Blog</span></p><div class="_slug__content__C7UY7"><p>â€»è¿½è¨˜ï¼šãã®å¾Œå®Ÿè£…ã‚’å¤‰ãˆã¾ã—ãŸ <a href="/posts/add-images-to-my-blog2">ãƒ–ãƒ­ã‚°ã«ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸã€œãã®å¾Œã€œ</a></p>
<p>å°‘ã—ãšã¤å¼„ã£ã¦ã‚‹ãƒ–ãƒ­ã‚°ã§ã™ãŒã€ã“ã®åº¦ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚</p>
<p><a href="https://unsplash.com/photos/vpOeXr5wmR4" rel="nofollow"><img src="./static/james-harrison-vpOeXr5wmR4-unsplash.jpg" alt="ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ"></a><br>
ï½¼ï¾ï½¬ï½°ï¾</p>
<p>ãã®æ™‚å°‘ã—ãƒãƒã£ãŸã®ã§ã€ãƒ­ã‚°ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚</p>
<h2 id="ä½¿ãŠã†ã¨ã—ãŸã‚‚ã®">ä½¿ãŠã†ã¨ã—ãŸã‚‚ã®</h2>
<p><a href="https://github.com/remarkjs/remark-embed-images" rel="nofollow">remarkjs/remark-embed-images</a></p>
<h2 id="ã‚„ã£ãŸã“ã¨">ã‚„ã£ãŸã“ã¨</h2>
<p><a href="https://github.com/Pon57/blog/commit/a74e1a337368daa3b692f78a9ae92f9b90b8881e" rel="nofollow">https://github.com/Pon57/blog/commit/a74e1a337368daa3b692f78a9ae92f9b90b8881e</a></p>
<h2 id="å¼•ã£ã‹ã‹ã£ãŸã¨ã“ã‚">å¼•ã£ã‹ã‹ã£ãŸã¨ã“ã‚</h2>
<p><code>gray-matter</code> ã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è§£æã—ãŸã®ã¡ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ–‡å­—åˆ—ã‚’æŠœãå‡ºã—ã¦ä½¿ã£ã¦ã„ãŸã€‚</p>
<pre><code class="hljs language-typescript"><span class="hljs-keyword">const</span> post = <span class="hljs-variable constant_">ALL_POSTS</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">post</span> =></span> slug === post.<span class="hljs-property">slug</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Post</span>

<span class="hljs-keyword">const</span> processedContent = <span class="hljs-keyword">await</span> <span class="hljs-title function_">unified</span>()
    .<span class="hljs-title function_">use</span>(remarkParse)
    .<span class="hljs-title function_">use</span>(remarkEmoji)
    .<span class="hljs-title function_">use</span>(remarkBreaks)
    .<span class="hljs-title function_">use</span>(remarkExternalLinks)
    .<span class="hljs-title function_">use</span>(remark2rehype)
    .<span class="hljs-title function_">use</span>(rehypeHighlight)
    .<span class="hljs-title function_">use</span>(rehypeSlug)
    .<span class="hljs-title function_">use</span>(rehypeStringify)
    .<span class="hljs-title function_">process</span>(post.<span class="hljs-property">content</span>)
</code></pre>
<p>ã“ã‚Œã«ãã®ã¾ã¾ <code>.use(remarkEmbedImages)</code> ã‚’å¿ã³è¾¼ã¾ã›ã€ãƒ–ãƒ­ã‚°æœ¬æ–‡ã«ç”»åƒã‚’å…¥ã‚Œã¦ã¿ãŸã€‚<br>
ãƒ‘ã‚¹ã¯ <code>/posts/[slug]/hoge.png</code> ã¨ã„ã†æ„Ÿã˜ã€‚ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯ãã®å½“æ™‚ã¯ <code>/posts/[slug].md</code></p>
<p>ã ã‘ã©ã©ã†ã‚‚ã†ã¾ãã„ã‹ãªã‹ã£ãŸã¿ãŸã„ã€‚</p>
<blockquote>
<p>TypeError [ERR_INVALID_ARG_TYPE]: The "path" argument must be of type string. Received type undefined</p>
</blockquote>
<p>è©¦ã—ã«çµ¶å¯¾ãƒ‘ã‚¹ã‚’å…¥ã‚ŒãŸã‘ã©ã€ç”»åƒã®å¤‰æ›ãŒè¡Œã‚ã‚Œãšã€å›ºå®šæ–‡å­—åˆ—ãŒå…¥ã£ã¡ã‚ƒã£ãŸã€‚<br>
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰è€ƒãˆãŸç›¸å¯¾ãƒ‘ã‚¹ã‚’å…¥ã‚Œã‚Œã°å•é¡Œãªãå‹•ã„ãŸã‘ã©ã€ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã®ç›¸å¯¾çš„ãªä½ç½®ãŒåˆã‚ãšã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ã§ããªã„ã—å«Œã ãªã€œã¨ã„ã†ã“ã¨ã§ãƒœãƒ„ã€‚</p>
<h2 id="è§£æ±ºã®ãŸã‚ã«ã‚„ã£ãŸã“ã¨">è§£æ±ºã®ãŸã‚ã«ã‚„ã£ãŸã“ã¨</h2>
<p>å‡ºã¦ã„ã‚‹å ´æ‰€ã¯ <code>remarkEmbedImages</code> ã§é–“é•ã„ãªã„ãŒã€ãªã‚“ã®ã“ã£ã¡ã‚ƒã¨ã„ã†æ„Ÿã˜ã€‚</p>
<p>ã‚¨ãƒ©ãƒ¼ãŒç¤ºã—ã¦ã„ãŸå ´æ‰€ã¯ã“ã“ã€‚<br>
<a href="https://github.com/remarkjs/remark-embed-images/blob/main/index.js#L27" rel="nofollow">https://github.com/remarkjs/remark-embed-images/blob/main/index.js#L27</a></p>
<p>å…¥ã‚Œã¦ã„ã‚‹ <code>path</code> ãŒé–¢ä¿‚ã‚ã‚‹ã®ã‹ã¨æ€ã„ãã‚„ã€<code>path</code> ã®å¼•æ•°ãŒ <code>undefined</code> ã®å ´åˆã‚‚ã“ã†ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚‰ã—ã„ã€‚ï¼ˆâ€»è¿½è¨˜ï¼šã‚¨ãƒ©ãƒ¼æ–‡ã«æ›¸ã„ã¦ã‚ã‚‹ã˜ã‚ƒã‚“ï¼ï¼‰<br>
VSCode ã§ç‰¹ã«ä½•ã‚‚ã›ãšä½¿ãˆãŸãƒ‡ãƒãƒƒã‚¬ãƒ¼ã‚’åˆ©ç”¨ã—ã¦å¤‰æ•°ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã©ã†ã‚„ã‚‰ <code>file.dirname</code> ãŒåŸå› ã ã‚ã†ã¨ã„ã†ã¨ã“ã‚ã¾ã§ã‚ã‹ã£ãŸã€‚</p>
<p>ã˜ã‚ƒã‚ <code>file</code> ã¯ãªã‚“ãªã®ï¼Ÿã¨ãªã‚‹ã‘ã©ã€ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã‚‚ã„ã¾ã„ã¡åˆ†ã‹ã‚‰ãšãƒ»ãƒ»ãƒ»</p>
<p>ãªã‚“ã‹æ¤œç´¢ã—ã¦ã„ã‚‹ã†ã¡ã«å†å®Ÿè£…ã—ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’è¦‹ã¤ã‘ãŸã€‚<br>
<a href="https://github.com/ahlec/jyosuushi/blob/0990e7c75c2df7c704acb9bcaca23bf999b3d181/scripts/markdown/parsing/embeded-images.ts" rel="nofollow">https://github.com/ahlec/jyosuushi/blob/0990e7c75c2df7c704acb9bcaca23bf999b3d181/scripts/markdown/parsing/embeded-images.ts</a></p>
<p>ãã‚“ãªã“ã‚“ãªã—ã¦ã„ã‚‹ã†ã¡ã« <code>file.dirname</code> ã« <code>posts</code> ã¨ã„ã†å›ºå®šæ–‡å­—åˆ—ã‚’å…¥ã‚Œã¦ã¿ãŸã€‚å‹•ã„ãŸï¼<br>
ã“ã®æ™‚ä¸–ç•ŒãŒå‹•ãå‡ºã—ãŸã€‚</p>
<p>ãªã‚“ã§ã‹è¦šãˆã¦ãªã„ã‘ã© <code>.process()</code> ã«ã¯ <code>vfile</code> ã‚’å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ã“ã¨ã‚’çŸ¥ã‚Šã€<code>vfile</code> ã¯ <code>dirname</code> ã‚„ <code>path</code>ã€<code>cwd</code> ãŒã‚ã‚Šã€ãªã‚“ã‹ã¿ãŸã“ã¨ã®ã‚ã‚‹ãªã€œã¨ã„ã†æ„Ÿã˜ã€‚<br>
<a href="https://github.com/vfile/vfile" rel="nofollow">https://github.com/vfile/vfile</a></p>
<p>ãã†ã‹ã€<code>remark-embed-images</code> ã® <code>file</code> ã¯ <code>vfile</code> ã®ã“ã¨ã ã£ãŸã®ã‹ãƒ»ãƒ»ãƒ»ã¨ãªã£ãŸï¼ˆã©ã†ã—ã¦ <code>vfile</code> ãªã®ã‹ã¯ã¾ã åˆ†ã‹ã£ã¦ãªã„ï¼‰</p>
<pre><code class="hljs language-diff">const post = ALL_POSTS.find(post => slug <span class="hljs-comment">=== post.slug) as Post</span>
<span class="hljs-addition">+ const file = toVFile({ value: post.content, path: process.cwd(), dirname: 'posts' })</span>

const processedContent = await unified()
    .use(remarkParse)
...
    .use(rehypeStringify)
<span class="hljs-deletion">-   .process(post)</span>
<span class="hljs-addition">+   .process(file)</span>
</code></pre>
<p>ã¨ã—ãŸã‚‰ç„¡äº‹å‹•ã„ãŸ ğŸ‰</p>
<h2 id="ãŠã‚ã‚Š">ãŠã‚ã‚Š</h2>
<p>ãªã‚“ã§å‹•ã„ãŸã®ã‹ã¨ã‹ã‚ã‚“ã¾ã‚Šã‚ˆãåˆ†ã‹ã£ã¦ã„ãªã„ã‘ã©ã€æ–‡å­—åˆ—ã‚’ <code>.process()</code> ã«å…¥ã‚Œã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã ã‘ã¯ã‚ã‚‹ã‘ã©å®Ÿä½“ã¯ç„¡ã„ã¿ãŸã„ãªæ‰±ã„ã‚’ã•ã‚Œã¦ã€ãã®çµæœ <code>dirname</code> ãŒ <code>undefined</code> ã«ãªã£ã¦ã„ãŸã¨ã‹ãã‚“ãªæ„Ÿã˜ã‹ãªãã£ã¦æ€ã£ã¦ã‚‹ã€‚<br>
ãã®ã†ã¡æ°—ãŒå‘ã„ãŸã‚‰è¿½ã£ã¦ã¿ã‚‹ã¨æ€ã†ã€‚</p>
<p>ã¨ã‚Šã‚ãˆãšå‹•ãã‚ˆã†ã«ãªã£ãŸã®ã§ã‚ˆã‹ã£ãŸ ğŸ˜š</p></div></div><footer class="_app_footer___uvS6">Â© 2021<!-- --> <a target="_blank" rel="noreferrer" href="https://twitter.com/pon_dev">Pon</a></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"content":"\u003cp\u003eâ€»è¿½è¨˜ï¼šãã®å¾Œå®Ÿè£…ã‚’å¤‰ãˆã¾ã—ãŸ \u003ca href=\"/posts/add-images-to-my-blog2\"\u003eãƒ–ãƒ­ã‚°ã«ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸã€œãã®å¾Œã€œ\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eå°‘ã—ãšã¤å¼„ã£ã¦ã‚‹ãƒ–ãƒ­ã‚°ã§ã™ãŒã€ã“ã®åº¦ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://unsplash.com/photos/vpOeXr5wmR4\" rel=\"nofollow\"\u003e\u003cimg src=\"./static/james-harrison-vpOeXr5wmR4-unsplash.jpg\" alt=\"ã‚µãƒ³ãƒ—ãƒ«ç”»åƒ\"\u003e\u003c/a\u003e\u003cbr\u003e\nï½¼ï¾ï½¬ï½°ï¾\u003c/p\u003e\n\u003cp\u003eãã®æ™‚å°‘ã—ãƒãƒã£ãŸã®ã§ã€ãƒ­ã‚°ã‚’æ®‹ã—ã¦ãŠãã¾ã™ã€‚\u003c/p\u003e\n\u003ch2 id=\"ä½¿ãŠã†ã¨ã—ãŸã‚‚ã®\"\u003eä½¿ãŠã†ã¨ã—ãŸã‚‚ã®\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/remarkjs/remark-embed-images\" rel=\"nofollow\"\u003eremarkjs/remark-embed-images\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"ã‚„ã£ãŸã“ã¨\"\u003eã‚„ã£ãŸã“ã¨\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/Pon57/blog/commit/a74e1a337368daa3b692f78a9ae92f9b90b8881e\" rel=\"nofollow\"\u003ehttps://github.com/Pon57/blog/commit/a74e1a337368daa3b692f78a9ae92f9b90b8881e\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"å¼•ã£ã‹ã‹ã£ãŸã¨ã“ã‚\"\u003eå¼•ã£ã‹ã‹ã£ãŸã¨ã“ã‚\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003egray-matter\u003c/code\u003e ã§ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è§£æã—ãŸã®ã¡ã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®æ–‡å­—åˆ—ã‚’æŠœãå‡ºã—ã¦ä½¿ã£ã¦ã„ãŸã€‚\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-typescript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e post = \u003cspan class=\"hljs-variable constant_\"\u003eALL_POSTS\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003efind\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003epost\u003c/span\u003e =\u003e\u003c/span\u003e slug === post.\u003cspan class=\"hljs-property\"\u003eslug\u003c/span\u003e) \u003cspan class=\"hljs-keyword\"\u003eas\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePost\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e processedContent = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eunified\u003c/span\u003e()\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(remarkParse)\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(remarkEmoji)\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(remarkBreaks)\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(remarkExternalLinks)\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(remark2rehype)\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(rehypeHighlight)\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(rehypeSlug)\n    .\u003cspan class=\"hljs-title function_\"\u003euse\u003c/span\u003e(rehypeStringify)\n    .\u003cspan class=\"hljs-title function_\"\u003eprocess\u003c/span\u003e(post.\u003cspan class=\"hljs-property\"\u003econtent\u003c/span\u003e)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eã“ã‚Œã«ãã®ã¾ã¾ \u003ccode\u003e.use(remarkEmbedImages)\u003c/code\u003e ã‚’å¿ã³è¾¼ã¾ã›ã€ãƒ–ãƒ­ã‚°æœ¬æ–‡ã«ç”»åƒã‚’å…¥ã‚Œã¦ã¿ãŸã€‚\u003cbr\u003e\nãƒ‘ã‚¹ã¯ \u003ccode\u003e/posts/[slug]/hoge.png\u003c/code\u003e ã¨ã„ã†æ„Ÿã˜ã€‚ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã¯ãã®å½“æ™‚ã¯ \u003ccode\u003e/posts/[slug].md\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eã ã‘ã©ã©ã†ã‚‚ã†ã¾ãã„ã‹ãªã‹ã£ãŸã¿ãŸã„ã€‚\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eTypeError [ERR_INVALID_ARG_TYPE]: The \"path\" argument must be of type string. Received type undefined\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eè©¦ã—ã«çµ¶å¯¾ãƒ‘ã‚¹ã‚’å…¥ã‚ŒãŸã‘ã©ã€ç”»åƒã®å¤‰æ›ãŒè¡Œã‚ã‚Œãšã€å›ºå®šæ–‡å­—åˆ—ãŒå…¥ã£ã¡ã‚ƒã£ãŸã€‚\u003cbr\u003e\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã‹ã‚‰è€ƒãˆãŸç›¸å¯¾ãƒ‘ã‚¹ã‚’å…¥ã‚Œã‚Œã°å•é¡Œãªãå‹•ã„ãŸã‘ã©ã€ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã®ç›¸å¯¾çš„ãªä½ç½®ãŒåˆã‚ãšã€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚‚ã§ããªã„ã—å«Œã ãªã€œã¨ã„ã†ã“ã¨ã§ãƒœãƒ„ã€‚\u003c/p\u003e\n\u003ch2 id=\"è§£æ±ºã®ãŸã‚ã«ã‚„ã£ãŸã“ã¨\"\u003eè§£æ±ºã®ãŸã‚ã«ã‚„ã£ãŸã“ã¨\u003c/h2\u003e\n\u003cp\u003eå‡ºã¦ã„ã‚‹å ´æ‰€ã¯ \u003ccode\u003eremarkEmbedImages\u003c/code\u003e ã§é–“é•ã„ãªã„ãŒã€ãªã‚“ã®ã“ã£ã¡ã‚ƒã¨ã„ã†æ„Ÿã˜ã€‚\u003c/p\u003e\n\u003cp\u003eã‚¨ãƒ©ãƒ¼ãŒç¤ºã—ã¦ã„ãŸå ´æ‰€ã¯ã“ã“ã€‚\u003cbr\u003e\n\u003ca href=\"https://github.com/remarkjs/remark-embed-images/blob/main/index.js#L27\" rel=\"nofollow\"\u003ehttps://github.com/remarkjs/remark-embed-images/blob/main/index.js#L27\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eå…¥ã‚Œã¦ã„ã‚‹ \u003ccode\u003epath\u003c/code\u003e ãŒé–¢ä¿‚ã‚ã‚‹ã®ã‹ã¨æ€ã„ãã‚„ã€\u003ccode\u003epath\u003c/code\u003e ã®å¼•æ•°ãŒ \u003ccode\u003eundefined\u003c/code\u003e ã®å ´åˆã‚‚ã“ã†ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚‰ã—ã„ã€‚ï¼ˆâ€»è¿½è¨˜ï¼šã‚¨ãƒ©ãƒ¼æ–‡ã«æ›¸ã„ã¦ã‚ã‚‹ã˜ã‚ƒã‚“ï¼ï¼‰\u003cbr\u003e\nVSCode ã§ç‰¹ã«ä½•ã‚‚ã›ãšä½¿ãˆãŸãƒ‡ãƒãƒƒã‚¬ãƒ¼ã‚’åˆ©ç”¨ã—ã¦å¤‰æ•°ã®ä¸­èº«ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã©ã†ã‚„ã‚‰ \u003ccode\u003efile.dirname\u003c/code\u003e ãŒåŸå› ã ã‚ã†ã¨ã„ã†ã¨ã“ã‚ã¾ã§ã‚ã‹ã£ãŸã€‚\u003c/p\u003e\n\u003cp\u003eã˜ã‚ƒã‚ \u003ccode\u003efile\u003c/code\u003e ã¯ãªã‚“ãªã®ï¼Ÿã¨ãªã‚‹ã‘ã©ã€ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã‚‚ã„ã¾ã„ã¡åˆ†ã‹ã‚‰ãšãƒ»ãƒ»ãƒ»\u003c/p\u003e\n\u003cp\u003eãªã‚“ã‹æ¤œç´¢ã—ã¦ã„ã‚‹ã†ã¡ã«å†å®Ÿè£…ã—ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã‚’è¦‹ã¤ã‘ãŸã€‚\u003cbr\u003e\n\u003ca href=\"https://github.com/ahlec/jyosuushi/blob/0990e7c75c2df7c704acb9bcaca23bf999b3d181/scripts/markdown/parsing/embeded-images.ts\" rel=\"nofollow\"\u003ehttps://github.com/ahlec/jyosuushi/blob/0990e7c75c2df7c704acb9bcaca23bf999b3d181/scripts/markdown/parsing/embeded-images.ts\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eãã‚“ãªã“ã‚“ãªã—ã¦ã„ã‚‹ã†ã¡ã« \u003ccode\u003efile.dirname\u003c/code\u003e ã« \u003ccode\u003eposts\u003c/code\u003e ã¨ã„ã†å›ºå®šæ–‡å­—åˆ—ã‚’å…¥ã‚Œã¦ã¿ãŸã€‚å‹•ã„ãŸï¼\u003cbr\u003e\nã“ã®æ™‚ä¸–ç•ŒãŒå‹•ãå‡ºã—ãŸã€‚\u003c/p\u003e\n\u003cp\u003eãªã‚“ã§ã‹è¦šãˆã¦ãªã„ã‘ã© \u003ccode\u003e.process()\u003c/code\u003e ã«ã¯ \u003ccode\u003evfile\u003c/code\u003e ã‚’å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã†ã“ã¨ã‚’çŸ¥ã‚Šã€\u003ccode\u003evfile\u003c/code\u003e ã¯ \u003ccode\u003edirname\u003c/code\u003e ã‚„ \u003ccode\u003epath\u003c/code\u003eã€\u003ccode\u003ecwd\u003c/code\u003e ãŒã‚ã‚Šã€ãªã‚“ã‹ã¿ãŸã“ã¨ã®ã‚ã‚‹ãªã€œã¨ã„ã†æ„Ÿã˜ã€‚\u003cbr\u003e\n\u003ca href=\"https://github.com/vfile/vfile\" rel=\"nofollow\"\u003ehttps://github.com/vfile/vfile\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eãã†ã‹ã€\u003ccode\u003eremark-embed-images\u003c/code\u003e ã® \u003ccode\u003efile\u003c/code\u003e ã¯ \u003ccode\u003evfile\u003c/code\u003e ã®ã“ã¨ã ã£ãŸã®ã‹ãƒ»ãƒ»ãƒ»ã¨ãªã£ãŸï¼ˆã©ã†ã—ã¦ \u003ccode\u003evfile\u003c/code\u003e ãªã®ã‹ã¯ã¾ã åˆ†ã‹ã£ã¦ãªã„ï¼‰\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-diff\"\u003econst post = ALL_POSTS.find(post =\u003e slug \u003cspan class=\"hljs-comment\"\u003e=== post.slug) as Post\u003c/span\u003e\n\u003cspan class=\"hljs-addition\"\u003e+ const file = toVFile({ value: post.content, path: process.cwd(), dirname: 'posts' })\u003c/span\u003e\n\nconst processedContent = await unified()\n    .use(remarkParse)\n...\n    .use(rehypeStringify)\n\u003cspan class=\"hljs-deletion\"\u003e-   .process(post)\u003c/span\u003e\n\u003cspan class=\"hljs-addition\"\u003e+   .process(file)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eã¨ã—ãŸã‚‰ç„¡äº‹å‹•ã„ãŸ ğŸ‰\u003c/p\u003e\n\u003ch2 id=\"ãŠã‚ã‚Š\"\u003eãŠã‚ã‚Š\u003c/h2\u003e\n\u003cp\u003eãªã‚“ã§å‹•ã„ãŸã®ã‹ã¨ã‹ã‚ã‚“ã¾ã‚Šã‚ˆãåˆ†ã‹ã£ã¦ã„ãªã„ã‘ã©ã€æ–‡å­—åˆ—ã‚’ \u003ccode\u003e.process()\u003c/code\u003e ã«å…¥ã‚Œã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã ã‘ã¯ã‚ã‚‹ã‘ã©å®Ÿä½“ã¯ç„¡ã„ã¿ãŸã„ãªæ‰±ã„ã‚’ã•ã‚Œã¦ã€ãã®çµæœ \u003ccode\u003edirname\u003c/code\u003e ãŒ \u003ccode\u003eundefined\u003c/code\u003e ã«ãªã£ã¦ã„ãŸã¨ã‹ãã‚“ãªæ„Ÿã˜ã‹ãªãã£ã¦æ€ã£ã¦ã‚‹ã€‚\u003cbr\u003e\nãã®ã†ã¡æ°—ãŒå‘ã„ãŸã‚‰è¿½ã£ã¦ã¿ã‚‹ã¨æ€ã†ã€‚\u003c/p\u003e\n\u003cp\u003eã¨ã‚Šã‚ãˆãšå‹•ãã‚ˆã†ã«ãªã£ãŸã®ã§ã‚ˆã‹ã£ãŸ ğŸ˜š\u003c/p\u003e","slug":"add-images-to-my-blog","title":"ãƒ–ãƒ­ã‚°ã«ç”»åƒã‚’è²¼ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸ","published":"2021-10-14","publishedIndex":1,"tags":["TypeScript","Next.js","Blog"],"fileName":"add-images-to-my-blog","staticFiles":["james-harrison-vpOeXr5wmR4-unsplash.jpg"]},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"add-images-to-my-blog"},"buildId":"6lyUpe6-GWfQPga3jDf8b","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>